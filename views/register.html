<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
    <!-- <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.css"> -->
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../public/css/login.css">

<body>
    

    <div class="main">
    <h2>用户注册</h2>
        <form id="reg_from" method="POST">
            <div class="form-group">
                <label for="exampleInputEmail1">邮箱</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Email">
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">用户名</label>
                <input type="text" class="form-control" id="username" name="username" placeholder="用户名">
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">密码</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="密码">
            </div>
            
            <button type="submit" class="btn btn-success longg">注册</button>
        </form>
    </div>

    <div class="remind">已有账号! <a href="/login">点击登录</a></div>
</body>

</html>

<script src="/node_modules/jquery/dist/jquery.js"></script>
<script>
    $('#reg_from').on('submit', function(e){
        e.preventDefault();
        var formData = $(this).serialize()
        console.log( $(this))
        $.ajax({
            url: '/register',
            type: 'post',
            data: formData,
            dataType: 'json',
            success: function(data){
                console.log(data)
                if(data.err_code == 1){
                    alert('邮箱或昵称已存在')
                } else if (data.err_code == 500){
                    alert('服务器忙，请稍后重试！')
                }else{
                    alert('注册成功')
                    // 一秒后页面跳转
                    setTimeout(function(){
                        window.location.href = '/'
                    },1000)
                }
            }
        })
    })





</script>